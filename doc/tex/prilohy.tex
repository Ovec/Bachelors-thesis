% ============================================================================ %
% Encoding: UTF-8 (žluťoučký kůň úpěl ďábelšké ódy)
% ============================================================================ %

\listofappendices

% \priloha{Název přílohy}
% Obsah přílohy

\priloha{General test plan}
\label{chap:generalTestPlan}

\begin{itemize}
    \item Test plan ID: TP0
    \item Context of testing:
          \begin{itemize}
              \item Project: Bachelor’s thesis.
              \item Test levels: Acceptance testing.
              \item Test types: Static and dynamic.
              \item Test items:
                    \begin{itemize}
                        \item Crunchy Postgres for Kubernetes Operator v5.3.1.
                        \item CloudNativePG Operator v1.20.0.
                        \item StackGres Operator v1.4.3.
                        \item Percona Operator for Postgres 1.4.0.
                    \end{itemize}
              \item Test scope: Operator, Operator’s documentation, Operator’s repository.
              \item Test basis: Defined criteria.
          \end{itemize}
    \item Risk register:
          \begin{itemize}
              \item Limited staff and time might prevent thorough testing of all features and functionalities of the software during acceptance testing.
              \item Inadequately trained staff might struggle to design effective test cases, which could result in missed defects and lower overall testing effectiveness.
              \item Due to the lack of expertise among staff members, the software's readiness for production might be inaccurately assessed, leading to incorrect conclusions about its quality.
          \end{itemize}
    \item Test strategy:
          \begin{itemize}
              \item General: The purpose of testing is to evaluate the ability of Operators to fulfill the desired criterias, and to provide information for making informed decisions on which Operator to select in last chapter. Non-functional requirements will be tested with static and dynamic test techniques.
              \item Test levels: Acceptance testing
              \item Test deliverables: Test plans, test completion reports.
              \item Entry criteria: Created environments.
              \item Exit criteria: Decision metrics were collected.
              \item Test competition criteria: All criteria covered by at least one test case.
              \item Degree of independence: No connection between tested Operators and tester. Tester is fully independent.
              \item Metrics to be collected:
                    \begin{itemize}
                        \item Static testing: Vulnerability analysis (number of vulnerabilities and their severity), Repository review (sum of issues, sum of repaired issues, sum of stars, sum of commits, repository creation date), Documentation review (examples, training needed),
                        \item Dynamic testing:  The sum of the commands required to achieve functionality. Covered monitoring. Performance described by transactions per second.
                    \end{itemize}
              \item Test data requirements:
                    \begin{itemize}
                        \item Crunchy Postgres for Kubernetes Operator v5.3.1
                              \begin{itemize}
                                  \item PGO: https://github.com/CrunchyData/postgres-operator-examples
                                  \item PGODOC: https://access.crunchydata.com/documentation/postgres-operator/v5/
                                  \item PGOREPO: https://github.com/CrunchyData/postgres-operator
                              \end{itemize}

                        \item CloudNativePG Operator version 1.20.0
                              \begin{itemize}
                                  \item CNPGO: https://raw.githubusercontent.com/cloudnative-pg/cloudnative-pg/release-1.20/releases/cnpg-1.20.0.yaml
                                  \item CNPGODOC: https://cloudnative-pg.io/documentation/1.20/
                                  \item CNPGOREPO: https://github.com/cloudnative-pg/cloudnative-pg
                              \end{itemize}

                        \item StackGres Operator version 1.4.3
                              \begin{itemize}
                                  \item SPGO: https://stackgres.io/downloads/stackgres-k8s/stackgres/helm/
                                  \item SPGODOC: https://stackgres.io/doc/1.4/
                                  \item SPGOREPO: https://gitlab.com/ongresinc/stackgres
                              \end{itemize}
                        \item Percona Operator for PostgreSQL version 1.4.0
                              \begin{itemize}
                                  \item PPOO: https://raw.githubusercontent.com/percona/percona-postgresql-operator/v1.4.0/deploy/operator.yaml
                                  \item PPODOC: https://docs.percona.com/percona-operator-for-postgresql/index.html
                                  \item PPOREPO: https://github.com/percona/percona-postgresql-operator
                              \end{itemize}
                    \end{itemize}
              \item Test environment requirements:
                    \begin{itemize}
                        \item Kind Kubernetes cluster with two worker nodes for all dynamic test except performance tests, installed on Unix/Linux compatible machine.
                        \item Google Kubernetes Engine with two worker nodes.
                        \item Terraform
                        \item Trivy security scanner.
                        \item Kubectl kubernetes controll tool.
                        \item EXCEL.
                    \end{itemize}
              \item Retesting: Retesting is not needed.
              \item Reggresion testing: Reggresion testing is not needed.
              \item Testing activities and estimates:
                    \begin{itemize}
                        \item Environment setup – 30m.
                        \item Repository walkthrough – 2h/Operator.
                        \item Documentation walkthrough – 2h/Operator.
                        \item Deployment and configuration – 4h/Operator.
                        \item Performance – 4h/Operator.
                        \item Operabilitiy and documentation – 8h/Operator.
                    \end{itemize}
              \item Staffing (roles and responsibilities)
                    \begin{itemize}
                        \item Roles: Test architect, test manager, test designer, tester and test analyst.
                        \item Staff: Miroslav Šiřina.
                    \end{itemize}
              \item Training needed
                    \begin{itemize}
                        \item Test management.
                        \item Test design.
                        \item Test analyst.
                        \item Trivy and results interpretation skills.
                    \end{itemize}
              \item Test priorities
                    \begin{itemize}
                        \item Static tests have higher priority to dynamic.
                        \item Critical criterias have higher priority.
                    \end{itemize}
              \item Schedule
                    \begin{itemize}
                        \item 1st May: repositories and documentations walkthroughs.
                        \item 2nd May: vulnerability analysis.
                        \item 3rd - 8th May: operability testing.
                        \item 9th May:  performance testing.
                        \item 10th May: 11th Testing closure.
                    \end{itemize}
          \end{itemize}
\end{itemize}

\priloha{Test process No. 1}

\tab{Test plan No. 1}{tab:testplan1}{1}{|l|l|}{
    \hline
    Test plan ID & tp1 \\ \hline
    Revision & 2 \\ \hline
    Introducton &  Repositories walkthrough \\ \hline
    Test items & Operator's repositories \\ \hline
    Covered criteria  & CR1, CM1 \\ \hline
    Test type &	Static \\ \hline
    Test approach &	Repositories walkthrough \\ \hline
    Exit criteria & All metrics gathered  \\ \hline
    Delivarables & Sum of commits, sum of stars, sum of issues, sum of fixed issues.  \\ \hline
    Duration & 2 h for each Operator \\ \hline
    Reviewer & Miroslav Šiřina \\ \hline
    Start & 1st May  \\ \hline
    Schedule & 1st May: repositories walkthrough and test report. \\ \hline
    Revisions & Rev No. 2 - added test cases MRC5 to MRC9. \\ \hline
}

\n{2}{Test items}
Test items for the procedure were following:
\begin{itemize}
    \item PGOREPO from General test plan
    \item CNPGOREPO from General test plan
    \item SPGOREPO from General test plan
    \item PPODREPO from General test plan
    \item PPOJIRA https://jira.percona.com/projects/DISTPG/issues/DISTPG-352?filter=allopenissues
\end{itemize}

\n{2}{Test tools}
Excel sheet

\n{2}{Test procedure}
\begin{itemize}
    \item MRC1 - PGOREPO walkthrough
    \item MRC2 - CNPGOREPO walkthrough
    \item MRC3 - SPGOREPO walkthrough
    \item MRC4 - PPODREPO walkthrough
    \item MRC5 - PGOREPO cloning - retrieving the date of creation and number of commits
    \item MRC6 - CNPGOREPO cloning - retrieving the date of creation and number of commits
    \item MRC7 - SPGOREPO cloning - retrieving the date of creation and number of commits
    \item MRC8 - PPODREPO cloning - retrieving the date of creation and number of commits
    \item MRC9 - PPOJIRA walkthrough
\end{itemize}

\n{2}{Test completition report}
Testing performed: Repositories walkthrough, repositories cloning, Percona Jira walkthrough

Deviations from planed testing: Percona is using Jira for tracking issues. To get issues Jira walkthrough was necessary. To count number of commits and get the date of first commit the repository cloning was necessary.

Test completion evaluation: The testing process was successful in gathering key data about the system despite deviations from the initial plan. The flexibility in testing procedures resulted in a more comprehensive evaluation and provided valuable insights into the system.

Factors that blocked progress: reposistory clonning, Jira walkthrough

Test Result Analysis: The tests provided valuable data about the state and history of repositories, as well as key insights into issue tracking.

Lessons Learned: The necessity to deviate from the initial test plan underlines the importance of flexibility in testing procedures. An adaptive approach can lead to a more thorough evaluation and better data collection.


\priloha{Test process No. 2}

\tab{Test plan No. 2}{tab:testplan2}{1}{|l|l|}{
    \hline
    Test plan ID & tp2 \\ \hline
    Revision & 1 \\ \hline
    Introducton & Checklist-based documentations review \\ \hline
    Test items & Operator's documentations \\ \hline
    Covered criteria  & CU1 \\ \hline
    Test type &	Static \\ \hline
    Test approach &	Checklist-based Testing \\ \hline
    Exit criteria & All checklists completed  \\ \hline
    Delivarables & List of examples and checklist  \\ \hline
    Duration & 2 h for each Operator \\ \hline
    Reviewer & Miroslav Šiřina \\ \hline
    Start & 1st May \\ \hline
    Schedule & 1st May: documentations walkthrough and test report. \\ \hline
}

\n{2}{Checklist}
\begin{itemize}
    \item Instalation
    \item Minor upgrade to new version
    \item Major upgrade to new version
    \item Backup
    \item Restore
    \item Monitoring
    \item Vertical scaling
    \item Horizontal scaling
    \item Configuration Update
    \item Uninstall
    \item Training needed
\end{itemize}

\n{2}{Test procedure}
\begin{itemize}
    \item LC1 - PGODOC checklist-based review
    \item LC2 - CNPGODOC checklist-based review
    \item LC3 - SPGODOC checklist-based review
    \item LC4 - PPODOC checklist-based review
\end{itemize}


\n{2}{Test results}

PGO
Documentation
\sloppy
\url{https://access.crunchydata.com/documentation/postgres-operator/v5/}

Cluster creation

\url{https://access.crunchydata.com/documentation/postgres-operator/v5/tutorial/create-cluster/}

Minor upgrade to new version

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/update-cluster/}

Major upgrade to new version

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/guides/major-postgres-version-upgrade/}

Backup

\url{https://access.crunchydata.com/documentation/postgres-operator/v5/tutorial/backup-management/}

Restore

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/disaster-recovery/}

Monitoring

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/monitoring/}

Vertical scaling

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/resize-cluster/}

Horizontal scaling

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/resize-cluster/}

Configuration Update

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/customize-cluster/}

Uninstall

\url{https://access.crunchydata.com/documentation/postgres-operator/5.3.1/tutorial/delete-cluster/}

Notes: PGO use kustomize for customization of yaml manifests.

CNPGO

Documentation

\url{https://cloudnative-pg.io/documentation/1.19/}

Cluster creation

\url{https://cloudnative-pg.io/documentation/1.19/quickstart/#part-3-deploy-a-postgresql-cluster}

Minor upgrade to new version

\url{https://cloudnative-pg.io/documentation/1.19/rolling_update/}

Major upgrade to new version
Not found

Backup

\url{https://cloudnative-pg.io/documentation/1.19/backup_recovery/#scheduled-backups}

Restore

\url{https://cloudnative-pg.io/documentation/1.19/backup_recovery/#scheduled-backups}

Monitoring

\url{https://cloudnative-pg.io/documentation/1.19/monitoring/}

Vertical scaling

\url{https://cloudnative-pg.io/documentation/1.19/resource_management/#resource-management}

Horizontal scaling

\url{https://cloudnative-pg.io/documentation/1.19/resource_management/#resource-management}

Configuration Update

\url{https://cloudnative-pg.io/documentation/1.19/postgresql_conf/#postgresql-configuration}

Uninstall

\url{https://cloudnative-pg.io/documentation/1.19/cnpg-plugin/#destroy}

Notes: Uninstall example use cnpg plugin. Helm is needed to install monitoring.

SPGO
Documentation

\url{https://stackgres.io/doc/1.4/}

Cluster creation

\url{https://stackgres.io/doc/1.4/demo/quickstart/}

Minor upgrade to new version – It is mentioned in documentation but without example

\url{https://stackgres.io/doc/1.4/reference/crd/sgdbops/#major-version-upgrade}

Major upgrade to new version - It is mentioned in documentation but without example

\url{https://stackgres.io/doc/1.4/reference/crd/sgdbops/#minor-version-upgrade}

Backup

\url{https://stackgres.io/doc/1.4/tutorial/complete-cluster/backup-configuration/}

Restore

\url{https://stackgres.io/doc/1.4/runbooks/restore-backup/}

Monitoring

\url{https://stackgres.io/doc/1.4/install/prerequisites/monitoring/}

Vertical scaling

\url{https://stackgres.io/doc/1.4/tutorial/complete-cluster/instance-profile/}

Horizontal scaling

\url{https://stackgres.io/doc/1.4/tutorial/complete-cluster/create-cluster/}

Configuration Update

\url{https://stackgres.io/doc/1.4/tutorial/complete-cluster/postgres-config/}

Uninstall

\url{https://stackgres.io/doc/1.4/administration/uninstall/}

Notes: Helm is needed to install monitoring.

PPO
Documentation

\url{https://docs.percona.com/percona-operator-for-postgresql/index.html}

Cluster creation

\url{https://docs.percona.com/percona-operator-for-postgresql/gke.html#installing-the-operator}

Minor upgrade to new version

\url{https://docs.percona.com/percona-operator-for-postgresql/update.html?h=postgres+update#semi-automatic-upgrade}

Major upgrade to new version

\url{https://docs.percona.com/percona-operator-for-postgresql/update.html?h=postgres+update#semi-automatic-upgrade}

Backup

\url{https://docs.percona.com/percona-operator-for-postgresql/backups.html?h=backup#use-google-cloud-storage-for-backups}

Restore

\url{https://docs.percona.com/percona-operator-for-postgresql/backups.html?h=backup#use-google-cloud-storage-for-backups}

Monitoring

\url{https://docs.percona.com/percona-operator-for-postgresql/monitoring.html?h=version#installing-the-pmm-client}

Vertical scaling
Not found

Horizontal scaling

\url{https://docs.percona.com/percona-operator-for-postgresql/scaling.html?h=scale}

Configuration Update

\url{https://docs.percona.com/percona-operator-for-postgresql/options.html#creating-a-cluster-with-custom-options}

Uninstall
Not found

Notes: Helm is needed to install monitoring.

\n{2}{Test completition report}
Testing performed: Checklist-based review

Deviations from planed testing: None

Test completion evaluation: The testing process was successful.

Factors that blocked progress: None

Test Result Analysis: The tests provided valuable data about the state of documentations, as well as key insights into Operators operation.

Lessons Learned: Future projects should be prepared for a high level of diversity in documentations. This might involve allocating more time for research or including personnel with a broader range of expertise.


\priloha{Test process No. 3}
\n{2}{Test plan No. 3}
\tab{Test plan No. 3}{tab:testplan3}{1}{|l|l|}{
    \hline
    Test plan ID & tp3 \\ \hline
    Revision & 4 \\ \hline
    Introducton & Vulnerability analysis of operators \\ \hline
    Test items & Operator's container images \\ \hline
    Covered criteria  & CS1 \\ \hline
    Test type &	Static \\ \hline
    Test approach &	Vulnerability analysis \\ \hline
    Exit criteria & Completed analysis  \\ \hline
    Tools & Trivy security scanner, Snyk security scanner \\ \hline
    Delivarables & Sum of vulnerabilities, vulnerability reports  \\ \hline
    Duration & 4 h for each Operator \\ \hline
    Tester & Miroslav Šiřina \\ \hline
    Start & 2nd May \\ \hline
    End & 18th May \\ \hline
    Schedule & 2nd May: analysis and test report. \\ \hline
    Revisions & 19th May: Rev No. 2 - added test case STC5. \\ \hline
    & 19th May: Rev No. 3 - added test cases STC6 - STC10. \\ \hline
    & 19th May: Rev No. 3 - Snyk introduced \\ \hline
    & 23th May: Rev No. 4 - added test cases STC11 - STC14. \\ \hline
}
\n{2}{Test items}
Test items for the procedure were following:
\begin{itemize}
    \item registry.developers.crunchydata.com/crunchydata/postgres-operator:ubi8-5.3.1-0
    \item ghcr.io/cloudnative-pg/cloudnative-pg:1.20.0
    \item stackgres/operator:1.4.3
    \item percona/percona-postgresql-operator:1.4.0-postgres-operator
\end{itemize}

\n{2}{Test tools}
Trivy security scaner version: 0.39.0, Vulnerability DB for all test cases except STC5 from 2nd May.
Vulnerability DB for STC5 from 18th May. Snyk v1.1159.0.

\n{2}{Test procedure}
\begin{itemize}
    \item STC1 - Vulnerability analysis of PGO
    \item STC2 - Vulnerability analysis of CNPGO
    \item STC3 - Vulnerability analysis of SPGO
    \item STC4 - Vulnerability analysis of PPO
    \item STC5 - Vulnerability analysis of Debian
    \item STC6 - Vulnerability analysis of PGO
    \item STC7 - Vulnerability analysis of CNPGO
    \item STC8 - Vulnerability analysis of SPGO
    \item STC9 - Vulnerability analysis of PPO
    \item STC10 - Vulnerability analysis of Debian
    \item STC11 - Vulnerability analysis of Kubernetes cluster with Postgres cluster deployed by PGO
    \item STC12 - Vulnerability analysis of Kubernetes cluster with Postgres cluster deployed by CNPGO
    \item STC13 - Vulnerability analysis of Kubernetes cluster with Postgres cluster deployed by SPGO
    \item STC14 - Vulnerability analysis of Kubernetes cluster with Postgres cluster deployed by PPO
\end{itemize}

\n{2}{Test completition report}
Testing performed: Vulnerability analysis

Deviations from planed testing: Described in revisions.

Test completion evaluation: The testing process was successful.

Factors that blocked progress: None

Test Result Analysis: The tests provided valuable data about vulnerabilities in Operators.

\priloha{Test process No. 4}

\tab{Test plan No. 4}{tab:testplan4}{1}{|l|l|}{
    \hline
    Test plan ID & tp4 \\ \hline
    Revision & 1 \\ \hline
    Introducton & This test should test the operators usability \\ \hline
    & and quality of their monitoring. \\ \hline
    Test items & Operator deployed in the cluster \\ \hline
    Covered criteria  & CU2 \\ \hline
    Test type &	Dynamic \\ \hline
    Test approach &	Use case based Blackbox testing \\ \hline
    Exit criteria & Each use case covered with atleast one test case \\ \hline
    Tools & Kind cluster, kubectl, helm, kustomize \\ \hline
    Delivarables & Number of commands needed to perform required operation. \\ \hline
    & List of covered monitoring topics. Print screens of monitoring.   \\ \hline
    Duration & 8 h for each Operator \\ \hline
    Tester & Miroslav Šiřina \\ \hline
    Start & 3rd May  \\ \hline
    End & 8th May  \\ \hline
    Schedule & 3rd May: Use cases creation \\ \hline
    & 4th May: PGO \\ \hline
    & 5th May: CNPGO \\ \hline
    & 6th May: SPGO \\ \hline
    & 7th May: PPO \\ \hline
}

\n{2}{Actors}
K - Kubernetes cluster

U - User

O - Operator

\n{2}{Use cases}
\tab{Use case No. 1}{tab:useCase1}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Operator installation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCA1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Prepared Kubernetes cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with prepared kubernetes cluster.     \\ \hline
    2            & U                           & The user initiates the installation of the operator. \\ \hline
    3            & K                           & Kubernetes installs the operator.                    \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 2}{tab:useCase2}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Basic cluster creation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCA2}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with the operator installed.      \\ \hline
    2            & U                           & The user initiates basic cluster install.  \\ \hline
    3            & O                           & The operator installs the cluster.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}


\tab{Use case No. 3}{tab:useCase3}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Monitoring installation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCC1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A, CU2B}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates monitoring installation.  \\ \hline
    3            & O                           & The operator installs cluster monitoring.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 4}{tab:useCase4}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Vertical scaling}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCD1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates vertical scaling.  \\ \hline
    3            & O                           & The operator scales the cluster.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 5}{tab:useCase5}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Horizontal scaling}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCE1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates horizontal scaling.  \\ \hline
    3            & O                           & The operator scales the cluster.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 6}{tab:useCase6}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Connection pooling}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCF1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates connection pooling installation.  \\ \hline
    3            & O                           & The operator installs connection pooler.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 7}{tab:useCase7}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Configuration update - extension installation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCG1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates Postgis extension installation.  \\ \hline
    3            & O                           & The operator installs Postgis extension.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 8}{tab:useCase8}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Configuration update - connections increase}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCG2}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator, created cluster, installed pooler.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster and installed pooler.       \\ \hline
    2            & U                           & The user increase connection pooler connections.  \\ \hline
    3            & O                           & The operator updates connection pooler configuration.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 9}{tab:useCase9}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Configuration update - max wal size}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCG3}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates max\_wal\_size parameter update.  \\ \hline
    3            & O                           & The operator updates max\_wal\_size parameter.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 10}{tab:useCase10}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Cluster scheduled backup}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCH1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user creates cluster backup schedule.  \\ \hline
    3            & O                           & The operator applies the cluster backup schedule.                 \\ \hline
    4            & O                           & The operator creates cluster backup.                 \\ \hline
    5            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 11}{tab:useCase11}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Cluster ad-hoc backup}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCH2}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates ad-hoc backup.  \\ \hline
    3            & O                           & The operator creates cluster backup.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 12}{tab:useCase12}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Cluster restore}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCI1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created backup.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created backup.       \\ \hline
    2            & U                           & The user initiates cluster restore.  \\ \hline
    3            & O                           & The operator restores the cluster.                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 13}{tab:useCase13}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Minor upgrade}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCJ1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created lower minor version cluster. }                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & The use case with the operator installed        \\ \hline
    &                            & and lower minor version cluster created.  \\ \hline
    2            & U                           & The user initiates minor version upgrade. \\ \hline
    3            & O                           & The operator performs minor version upgrade.                \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 14}{tab:useCase14}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Major upgrade}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCK1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created lower major version cluster. }                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & The use case with the operator installed.        \\ \hline
    &                            & and lower major version cluster created.  \\ \hline
    2            & U                           & The user initiates major version upgrade. \\ \hline
    3            & O                           & The operator performs major version upgrade.                \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 15}{tab:useCase15}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Operator uninstallation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCL1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates Operator uninstallation.  \\ \hline
    3            & O                           & Operator uninstalls but keep the cluster                 \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\tab{Use case No. 16}{tab:useCase16}{.5}{|l|l|l|}{
    \hline
    Use case name  & \multicolumn{2}{|l|}{Cluster uninstallation}  \\ \hline
    Use case ID  & \multicolumn{2}{|l|}{UCM1}  \\ \hline
    Traceability & \multicolumn{2}{|l|}{CU2A}                                                   \\ \hline
    Precondition & \multicolumn{2}{|l|}{Installed Operator and created cluster.}                                                    \\ \hline
    \multicolumn{3}{|l|}{Scenario}                                                 \\ \hline
    Step No.     & Actor                       & Description                                          \\ \hline
    1            & U                           & Use case starts with created cluster.       \\ \hline
    2            & U                           & The user initiates cluster uninstallation.  \\ \hline
    3            & O                           & Operator uninstalls cluster.                \\ \hline
    4            & U                           & Use case ends.                                       \\ \hline
}

\n{2}{Test procedure}
\begin{itemize}
    \item TOA1 - Operator installation.
    \item TOB1 - Cluster installation.
    \item TOC1 - Cluster monitoring.
    \item TOD1 - Cluster vertical scaling.
    \item TOE1 - Cluster horizontal scaling.
    \item TOF1 - Cluster connection pooling.
    \item TOG1 - Cluster extension install.
    \item TOG2 - Cluster number of connections update.
    \item TOG3 - Cluster max\_wal\_size change.
    \item TOH1 - Cluster scheduled backup.
    \item TOH2 - Cluster ad-hoc backup.
    \item TOI1 - Cluster restore.
    \item TOJ1 - Cluster minor update.
    \item TOK1 - Cluster major update.
    \item TOL1 - Operator uninstallation.
    \item TOM1 - Cluster uninstall.
\end{itemize}

\n{2}{Test completition report}
Testing performed: Use case base Black box testing

Deviations from planed testing: None

Test completion evaluation: The testing process was successful.

Factors that blocked progress: Diverse documentation and diversity of operators.

Test Result Analysis: The tests provided valuable data about the ease of use of the operators.

Lessons Learned: Future projects should be prepared for a high level of diversity in documentations and tested items.


\priloha{Test process No. 5}

\tab{Test plan No. 5}{tab:testplan5}{1}{|l|l|}{
    \hline
    Test plan ID & tp5 \\ \hline
    Revision & 1 \\ \hline
    Introducton & Performance analysis \\ \hline
    Test items & Operator deployed GKE in the cluster \\ \hline
    Covered criteria  & CP \\ \hline
    Test type &	Dynamic \\ \hline
    Test approach &	Performance analysis \\ \hline
    Exit criteria & Completed analysis  \\ \hline
    Tools & PgBench Postgres benchmark tool  \\ \hline
    Delivarables & Performance reports  \\ \hline
    Duration & 4 h for each Operator \\ \hline
    Tester & Miroslav Šiřina \\ \hline
    Start & 9th May \\ \hline
    Schedule &  9th May: analysis and test report. \\ \hline
}

\n{2}{Test completition report}
Testing performed: Performance analysis

Deviations from planed testing: SPGO analysis took too long

Test completion evaluation: None

Factors that blocked progress: Deploying SPGO proved challenging due to the fact that SPGO requires a cluster profile to deploy the cluster, which will specify the allocated processor and memory. With the correct settings of these values, the cluster was unable to find suitable resources for SPGO. By gradually reducing these values, available resources were eventually found.

Test Result Analysis: The tests provided valuable data about performanc of Postgres deployed by Operators.

\n{2}{Test results}
\n{3}{PGO}
pgbench (15.2)

starting vacuum...end.

transaction type: <builtin: TPC-B (sort of)>

scaling factor: 1

query mode: simple

number of clients: 25

number of threads: 10

maximum number of tries: 1

number of transactions per client: 10000

number of transactions actually processed: 250000/250000

number of failed transactions: 0 (0.000\%)

latency average = 45.879 ms

initial connection time = 745.406 ms

tps = 544.913924 (without initial connection time)

latency average = 46.016 ms

initial connection time = 688.436 ms

tps = 543.289895 (without initial connection time)

latency average = 46.424 ms

initial connection time = 750.453 ms

tps = 538.511794 (without initial connection time)

\n{3}{CNPGO}

pgbench (15.2)

starting vacuum...end.

pgbench: error: client 6 script 0 aborted in command 4 query 0: FATAL:  query wait timeout

SSL connection has been closed unexpectedly

transaction type: <builtin: TPC-B (sort of)>

scaling factor: 1

query mode: simple

number of clients: 25

number of threads: 10

maximum number of tries: 1

number of transactions per client: 10000

number of transactions actually processed: 240000/250000

number of failed transactions: 0 (0.000\%)

latency average = 61.927 ms

initial connection time = 729.483 ms

tps = 403.698126 (without initial connection time)

pgbench: error: Run was aborted; the above results are incomplete.

command terminated with exit code 2

latency average = 62.105 ms

initial connection time = 710.013 ms

tps = 402.544415 (without initial connection time)

latency average = 63.673 ms

initial connection time = 706.203 ms

tps = 392.629101 (without initial connection time)

\n{3}{PPO}

pgbench (15.2, server 14.7 - Percona Distribution)

starting vacuum...end.

transaction type: <builtin: TPC-B (sort of)>

scaling factor: 1

query mode: simple

number of clients: 25

number of threads: 10

maximum number of tries: 1

number of transactions per client: 10000

number of transactions actually processed: 250000/250000

number of failed transactions: 0 (0.000\%)

latency average = 62.272 ms

initial connection time = 707.856 ms

tps = 401.464378 (without initial connection time)

pgbench (15.2, server 14.7 - Percona Distribution)

latency average = 63.769 ms

initial connection time = 690.586 ms

tps = 392.039997 (without initial connection time)

latency average = 64.467 ms

initial connection time = 574.644 ms

tps = 387.793393 (without initial connection time)

\n{3}{SPGO}

pgbench (15.2, server 15.1 (OnGres 15.1-build-6.18))

starting vacuum...end.

transaction type: <builtin: TPC-B (sort of)>

scaling factor: 1

query mode: simple

number of clients: 25

number of threads: 10

maximum number of tries: 1

number of transactions per client: 10000

number of transactions actually processed: 250000/250000

number of failed transactions: 0 (0.000\%)

latency average = 87.906 ms

initial connection time = 60.527 ms

tps = 284.394442 (without initial connection time)

latency average = 89.321 ms

initial connection time = 67.533 ms

tps = 279.890815 (without initial connection time)

latency average = 80.863 ms

initial connection time = 74.577 ms

tps = 309.164610 (without initial connection time)

% ============================================================================ %
